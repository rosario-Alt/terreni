<!DOCTYPE html>
<html lang="it">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Ricerca Terreni - Sistema Completo</title>
   <style>
       * {
           margin: 0;
           padding: 0;
           box-sizing: border-box;
       }
       
       body {
           font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
           background: linear-gradient(135deg, #667eea, #764ba2);
           min-height: 100vh;
           padding: 20px;
       }
       
       .container {
           max-width: 1200px;
           margin: 0 auto;
           background: white;
           border-radius: 20px;
           padding: 40px;
           box-shadow: 0 20px 60px rgba(0,0,0,0.3);
       }
       
       h1 {
           text-align: center;
           color: #2c3e50;
           font-size: 2.5em;
           margin-bottom: 10px;
       }
       
       .subtitle {
           text-align: center;
           color: #666;
           margin-bottom: 30px;
           font-size: 1.1em;
       }
       
       .form-section {
           background: #f8f9fa;
           padding: 30px;
           border-radius: 15px;
           margin-bottom: 30px;
       }
       
       .form-grid {
           display: grid;
           grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
           gap: 20px;
           margin-bottom: 20px;
       }
       
       .form-group {
           display: flex;
           flex-direction: column;
       }
       
       .form-group label {
           font-weight: 600;
           margin-bottom: 8px;
           color: #333;
           display: flex;
           align-items: center;
           gap: 5px;
       }
       
       .required {
           color: #dc3545;
       }
       
       .form-group input,
       .form-group select {
           padding: 12px;
           border: 2px solid #ddd;
           border-radius: 8px;
           font-size: 15px;
           transition: border-color 0.3s;
       }
       
       .form-group input:focus,
       .form-group select:focus {
           outline: none;
           border-color: #667eea;
           box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
       }
       
       .btn-container {
           display: grid;
           grid-template-columns: 2fr 1fr;
           gap: 15px;
           margin-top: 25px;
       }
       
       .btn {
           padding: 15px 30px;
           border: none;
           border-radius: 10px;
           font-size: 16px;
           font-weight: bold;
           cursor: pointer;
           transition: all 0.3s;
       }
       
       .btn-search {
           background: linear-gradient(45deg, #28a745, #20c997);
           color: white;
       }
       
       .btn-search:hover {
           transform: translateY(-2px);
           box-shadow: 0 10px 30px rgba(40, 167, 69, 0.3);
       }
       
       .btn-reset {
           background: #6c757d;
           color: white;
       }
       
       .btn-reset:hover {
           background: #5a6268;
       }
       
       .results {
           display: none;
       }
       
       .results.show {
           display: block;
       }
       
       .results-header {
           background: linear-gradient(45deg, #2c3e50, #34495e);
           color: white;
           padding: 20px;
           border-radius: 10px 10px 0 0;
           text-align: center;
       }
       
       .sites-container {
           background: #f8f9fa;
           padding: 30px;
           border-radius: 0 0 10px 10px;
       }
       
       .site-card {
           background: white;
           border: 2px solid #e0e0e0;
           border-radius: 10px;
           padding: 20px;
           margin-bottom: 15px;
           transition: all 0.3s;
       }
       
       .site-card:hover {
           border-color: #667eea;
           transform: translateX(10px);
           box-shadow: 0 5px 20px rgba(0,0,0,0.1);
       }
       
       .site-header {
           display: flex;
           justify-content: space-between;
           align-items: center;
           margin-bottom: 10px;
       }
       
       .site-name {
           font-size: 1.3em;
           font-weight: bold;
           color: #2c3e50;
       }
       
       .site-badge {
           background: #28a745;
           color: white;
           padding: 4px 12px;
           border-radius: 20px;
           font-size: 12px;
       }
       
       .site-link {
           display: inline-block;
           background: #007bff;
           color: white;
           padding: 12px 25px;
           text-decoration: none;
           border-radius: 8px;
           font-weight: bold;
           margin-right: 10px;
           margin-top: 10px;
           transition: all 0.3s;
       }
       
       .site-link:hover {
           background: #0056b3;
           transform: translateY(-2px);
       }
       
       .copy-btn {
           background: #6c757d;
           color: white;
           border: none;
           padding: 12px 20px;
           border-radius: 8px;
           cursor: pointer;
           font-weight: bold;
       }
       
       .copy-btn:hover {
           background: #5a6268;
       }
       
       .summary {
           background: #e3f2fd;
           padding: 20px;
           border-radius: 10px;
           margin-bottom: 20px;
           border-left: 4px solid #2196f3;
       }
       
       .summary h3 {
           color: #1976d2;
           margin-bottom: 10px;
       }
       
       .summary-grid {
           display: grid;
           grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
           gap: 15px;
           margin-top: 15px;
       }
       
       .summary-item {
           display: flex;
           align-items: center;
           gap: 8px;
       }
       
       .summary-label {
           font-weight: bold;
           color: #555;
       }
       
       .summary-value {
           color: #1976d2;
       }
       
       @media (max-width: 768px) {
           .form-grid {
               grid-template-columns: 1fr;
           }
           .btn-container {
               grid-template-columns: 1fr;
           }
       }
   </style>
</head>
<body>
   <div class="container">
       <h1>üèûÔ∏è Ricerca Terreni Avanzata</h1>
       <p class="subtitle">Sistema completo con tutti i parametri di ricerca</p>
       
       <div class="form-section">
           <h2 style="margin-bottom: 20px; color: #2c3e50;">Imposta i tuoi criteri di ricerca:</h2>
           
           <div class="form-grid">
               <div class="form-group">
                   <label>
                       üìç Localit√†/Citt√†
                       <span class="required">*</span>
                   </label>
                   <input type="text" id="location" placeholder="es. Milano, Roma, Napoli, Catania" required>
               </div>
               
               <div class="form-group">
                   <label>üèõÔ∏è Provincia (sigla)</label>
                   <input type="text" id="provincia" placeholder="es. MI, RM, NA, CT" maxlength="2">
               </div>
               
               <div class="form-group">
                   <label>üèóÔ∏è Tipo Terreno</label>
                   <select id="tipo">
                       <option value="">Tutti i tipi</option>
                       <option value="agricolo">Agricolo</option>
                       <option value="edificabile">Edificabile</option>
                       <option value="industriale">Industriale/Artigianale</option>
                       <option value="commerciale">Commerciale</option>
                       <option value="residenziale">Residenziale</option>
                       <option value="turistico">Turistico/Ricettivo</option>
                       <option value="boschivo">Boschivo</option>
                       <option value="rustico">Rustico con rudere</option>
                   </select>
               </div>
               
               <div class="form-group">
                   <label>üí∞ Prezzo Minimo ‚Ç¨</label>
                   <input type="number" id="prezzoMin" placeholder="es. 10000" step="1000">
               </div>
               
               <div class="form-group">
                   <label>üí∞ Prezzo Massimo ‚Ç¨</label>
                   <input type="number" id="prezzoMax" placeholder="es. 100000" step="1000">
               </div>
               
               <div class="form-group">
                   <label>üìè Superficie Min (mq)</label>
                   <input type="number" id="mqMin" placeholder="es. 500" step="100">
               </div>
               
               <div class="form-group">
                   <label>üìè Superficie Max (mq)</label>
                   <input type="number" id="mqMax" placeholder="es. 10000" step="100">
               </div>
               
               <div class="form-group">
                   <label>üåÑ Caratteristiche</label>
                   <select id="caratteristiche">
                       <option value="">Qualsiasi</option>
                       <option value="pianeggiante">Terreno pianeggiante</option>
                       <option value="collinare">Terreno collinare</option>
                       <option value="montano">Terreno montano</option>
                       <option value="mare">Vista mare/Vicino mare</option>
                       <option value="lago">Vista lago/Vicino lago</option>
                       <option value="strada">Fronte strada</option>
                       <option value="recintato">Gi√† recintato</option>
                       <option value="pozze">Con pozzo</option>
                       <option value="allaccio">Allacci utenze</option>
                   </select>
               </div>
               
               <div class="form-group">
                   <label>üìç Distanza dal centro (km)</label>
                   <input type="number" id="distanza" placeholder="es. 5" step="1">
               </div>
           </div>
           
           <div class="btn-container">
               <button class="btn btn-search" onclick="cercaConParametri()">
                   üîç CERCA TERRENI
               </button>
               <button class="btn btn-reset" onclick="resetForm()">
                   üîÑ PULISCI FORM
               </button>
           </div>
       </div>
       
       <div id="results" class="results">
           <div class="summary" id="summary"></div>
           
           <div class="results-header">
               <h2>üéØ Link Diretti ai Portali Immobiliari</h2>
               <p>Clicca per cercare con i tuoi parametri</p>
           </div>
           
           <div class="sites-container" id="sitesContainer"></div>
       </div>
   </div>
   
   <script>
   function cercaConParametri() {
       const location = document.getElementById('location').value.trim();
       
       if (!location) {
           alert('‚ö†Ô∏è La localit√† √® obbligatoria!');
           document.getElementById('location').focus();
           return;
       }
       
       // Raccogli tutti i parametri
       const params = {
           location: location,
           provincia: document.getElementById('provincia').value,
           tipo: document.getElementById('tipo').value,
           prezzoMin: document.getElementById('prezzoMin').value,
           prezzoMax: document.getElementById('prezzoMax').value,
           mqMin: document.getElementById('mqMin').value,
           mqMax: document.getElementById('mqMax').value,
           caratteristiche: document.getElementById('caratteristiche').value,
           distanza: document.getElementById('distanza').value
       };
       
       // Mostra riepilogo ricerca
       mostraRiepilogo(params);
       
       // Genera link per ogni sito
       generaLinks(params);
       
       // Mostra risultati
       document.getElementById('results').classList.add('show');
       document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
   }
   
   function mostraRiepilogo(params) {
       let html = '<h3>üìä Riepilogo della tua ricerca:</h3><div class="summary-grid">';
       
       html += `<div class="summary-item">
           <span class="summary-label">üìç Localit√†:</span>
           <span class="summary-value">${params.location}</span>
       </div>`;
       
       if (params.provincia) {
           html += `<div class="summary-item">
               <span class="summary-label">üèõÔ∏è Provincia:</span>
               <span class="summary-value">${params.provincia.toUpperCase()}</span>
           </div>`;
       }
       
       if (params.tipo) {
           html += `<div class="summary-item">
               <span class="summary-label">üèóÔ∏è Tipo:</span>
               <span class="summary-value">${params.tipo}</span>
           </div>`;
       }
       
       if (params.prezzoMin || params.prezzoMax) {
           const prezzo = params.prezzoMin && params.prezzoMax ? 
               `‚Ç¨${Number(params.prezzoMin).toLocaleString('it-IT')} - ‚Ç¨${Number(params.prezzoMax).toLocaleString('it-IT')}` :
               params.prezzoMin ? `Min ‚Ç¨${Number(params.prezzoMin).toLocaleString('it-IT')}` :
               `Max ‚Ç¨${Number(params.prezzoMax).toLocaleString('it-IT')}`;
           
           html += `<div class="summary-item">
               <span class="summary-label">üí∞ Prezzo:</span>
               <span class="summary-value">${prezzo}</span>
           </div>`;
       }
       
       if (params.mqMin || params.mqMax) {
           const mq = params.mqMin && params.mqMax ? 
               `${params.mqMin} - ${params.mqMax} mq` :
               params.mqMin ? `Min ${params.mqMin} mq` :
               `Max ${params.mqMax} mq`;
           
           html += `<div class="summary-item">
               <span class="summary-label">üìè Superficie:</span>
               <span class="summary-value">${mq}</span>
           </div>`;
       }
       
       if (params.caratteristiche) {
           html += `<div class="summary-item">
               <span class="summary-label">üåÑ Caratteristiche:</span>
               <span class="summary-value">${params.caratteristiche}</span>
           </div>`;
       }
       
       if (params.distanza) {
           html += `<div class="summary-item">
               <span class="summary-label">üìç Distanza:</span>
               <span class="summary-value">Max ${params.distanza} km dal centro</span>
           </div>`;
       }
       
       html += '</div>';
       document.getElementById('summary').innerHTML = html;
   }
   
   function generaLinks(params) {
       const locationSlug = params.location.toLowerCase()
           .normalize("NFD")
           .replace(/[\u0300-\u036f]/g, "")
           .replace(/\s+/g, '-')
           .replace(/[^a-z0-9-]/g, '');
       
       const locationEncoded = encodeURIComponent(params.location);
       
       const sites = [
           {
               name: 'Immobiliare.it',
               badge: 'Pi√π annunci',
               desc: 'Il portale N¬∞1 in Italia',
               url: buildImmobiliareUrl(locationSlug, params)
           },
           {
               name: 'Idealista.it',
               badge: 'Verificati',
               desc: 'Annunci con foto verificate',
               url: buildIdealistaUrl(locationSlug, params)
           },
           {
               name: 'Subito.it',
               badge: 'Privati',
               desc: 'Annunci diretti da privati',
               url: buildSubitoUrl(locationEncoded, params)
           },
           {
               name: 'Casa.it',
               badge: 'Agenzie',
               desc: 'Solo agenzie professionali',
               url: buildCasaUrl(locationSlug, params)
           },
           {
               name: 'Bakeca.it',
               badge: 'Locali',
               desc: 'Annunci della zona',
               url: buildBakecaUrl(locationEncoded, params)
           }
       ];
       
       let html = '';
       sites.forEach(site => {
           html += `
               <div class="site-card">
                   <div class="site-header">
                       <div class="site-name">${site.name}</div>
                       <div class="site-badge">${site.badge}</div>
                   </div>
                   <p style="color: #666; margin: 10px 0;">${site.desc}</p>
                   <a href="${site.url}" target="_blank" class="site-link">
                       Apri Ricerca ‚Üí
                   </a>
                   <button class="copy-btn" onclick="copyUrl('${site.url}')">
                       üìã Copia Link
                   </button>
               </div>
           `;
       });
       
       document.getElementById('sitesContainer').innerHTML = html;
   }
   
   function buildImmobiliareUrl(location, params) {
       let url = `https://www.immobiliare.it/terreni/vendita-${location}/`;
       const queryParams = [];
       
       if (params.prezzoMin) queryParams.push(`prezzoMinimo=${params.prezzoMin}`);
       if (params.prezzoMax) queryParams.push(`prezzoMassimo=${params.prezzoMax}`);
       if (params.mqMin) queryParams.push(`superficieMinima=${params.mqMin}`);
       if (params.mqMax) queryParams.push(`superficieMassima=${params.mqMax}`);
       
       if (queryParams.length > 0) {
           url += '?' + queryParams.join('&');
       }
       
       return url;
   }
   
   function buildIdealistaUrl(location, params) {
       let url = `https://www.idealista.it/vendita-terreni/${location}/`;
       
       if (params.prezzoMax || params.mqMin) {
           url += 'con-';
           if (params.prezzoMax) url += `prezzo-max_${params.prezzoMax},`;
           if (params.mqMin) url += `dimensione_${params.mqMin},`;
           url = url.slice(0, -1) + '/';
       }
       
       return url;
   }
   
   function buildSubitoUrl(location, params) {
       let url = `https://www.subito.it/annunci-italia/vendita/terreni-e-rustici/?q=${location}`;
       
       if (params.tipo) url += `+${params.tipo}`;
       if (params.prezzoMin) url += `&ps=${params.prezzoMin}`;
       if (params.prezzoMax) url += `&pe=${params.prezzoMax}`;
       
       return url;
   }
   
   function buildCasaUrl(location, params) {
       let url = `https://www.casa.it/vendita/terreni/${location}/`;
       const queryParams = [];
       
       if (params.prezzoMax) queryParams.push(`pricemax=${params.prezzoMax}`);
       if (params.mqMin) queryParams.push(`surfacemin=${params.mqMin}`);
       
       if (queryParams.length > 0) {
           url += '?' + queryParams.join('&');
       }
       
       return url;
   }
   
   function buildBakecaUrl(location, params) {
       let url = `https://www.bakeca.it/case/vendita-terreni/?keyword=${location}`;
       
       if (params.tipo) url += `+${params.tipo}`;
       if (params.prezzoMax) url += `&max=${params.prezzoMax}`;
       
       return url;
   }
   
   function copyUrl(url) {
       navigator.clipboard.writeText(url).then(() => {
           const btn = event.target;
           const originalText = btn.innerHTML;
           btn.innerHTML = '‚úÖ Copiato!';
           btn.style.background = '#28a745';
           
           setTimeout(() => {
               btn.innerHTML = originalText;
               btn.style.background = '#6c757d';
           }, 2000);
       }).catch(() => {
           prompt('Copia questo link:', url);
       });
   }
   
   function resetForm() {
       document.getElementById('location').value = '';
       document.getElementById('provincia').value = '';
       document.getElementById('tipo').value = '';
       document.getElementById('prezzoMin').value = '';
       document.getElementById('prezzoMax').value = '';
       document.getElementById('mqMin').value = '';
       document.getElementById('mqMax').value = '';
       document.getElementById('caratteristiche').value = '';
       document.getElementById('distanza').value = '';
       document.getElementById('results').classList.remove('show');
   }
   
   // Permetti invio con Enter
   document.addEventListener('keypress', function(e) {
       if (e.key === 'Enter' && e.target.tagName !== 'TEXTAREA') {
           cercaConParametri();
       }
   });
   </script>
</body>
</html>
